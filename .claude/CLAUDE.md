## 1. 개요

본 프로젝트는 금융 지식이 부족한 사회초년생이 특정 시점의 재무 목표(예: 5년 뒤 1억 만들기)를 달성할 수 있도록 돕는 로보 어드바이저 엔진을 개발하는 것입니다. 복리 계산을 넘어 듀레이션 매칭(Duration Matching) 기법을 통해 금리 변동 리스크를 수학적으로 제어하는 최적의 자산 배분 포트폴리오를 제공합니다.

> **핵심 차별점:** 기존 저축 계산기가 고정 금리를 가정하는 반면, 본 시스템은 듀레이션 매칭으로 금리 변동 리스크를 통제한 상태에서 세후 실질 수익률을 최대화합니다. 또한 청년도약저축, ISA, 예적금 등 사회초년생이 실제로 접근 가능한 상품으로 포트폴리오를 구성하며, 정부 기여금과 세제 혜택이 높은 상품을 우선 배정합니다.
> 

---

## 2. 문제 정의

### 2.1. 사용자 페르소나 (Persona)

| 항목 | 내용 |
| --- | --- |
| **이름** | 노아 (25세, 신입 사원) |
| **목표** | 5년(60개월) 뒤, 독립 자금 **1억 원** 마련 |
| **월 저축액** | 150만 원 (단순 적금 시 목표 달성 불가, 약 400만 원 Gap) |
| **성향** | 원금 손실을 극도로 꺼리지만, 예금 금리 이상의 수익이 필요 |
| **특징** | 청년도약저축 가입 자격 보유, ISA 계좌 개설 가능 |

### 2.2. 기존 솔루션의 한계

- **고정 금리 가정:** 기존 저축 계산기는 '예상 금리'가 5년 내내 고정된다고 가정합니다.
- **재투자 위험 미반영:** 금리 하락 시 만기 자금을 더 낮은 금리로 재투자해야 하는 위험을 고려하지 않습니다.
- **상품 통합 부재:** 청년도약저축, ISA, 예적금 등 다양한 상품을 하나의 목표 아래 통합 관리하는 솔루션이 없습니다.

> *재투자 위험(Reinvestment Risk): 고정소득 금융상품에서 발생하는 이자나 원금을 만기 전에 다시 투자할 때, 시장 금리 하락으로 인해 더 낮은 수익률로 재투자하게 되어 전체 수익률이 낮아지는 위험*
> 

---

## 3. 핵심 기술 및 이론

### 3.1. 듀레이션 매칭 (Duration Matching)

목표 시점까지의 기간과 보유 자산의 평균 회수 기간을 일치시키는 **면역화 전략**입니다.

- **원리:** 금리 변동 시 발생하는 가격 변동 위험과 재투자 수익 위험이 서로 상쇄되도록 포트폴리오를 구성합니다.
- **적용 방법:** 각 금융상품의 듀레이션을 산출한 후, 가중 평균 듀레이션이 목표 기간(5년)과 일치하도록 비중을 조절합니다.

**매콜리 듀레이션 수식:**

$$
D_{mac} = \frac{\sum_{t=1}^{n} \frac{t \cdot CF_t}{(1+y)^t}}{\sum_{t=1}^{n} \frac{CF_t}{(1+y)^t}} 
$$

*(CF: 현금 흐름, y: 만기 수익률, t: 기간)*

> *면역화 전략(Immunization Strategy): 듀레이션 매칭을 통해 이자율 변동에 따른 가격 변동 위험과 재투자 위험을 서로 상쇄시킴으로써, 시장 금리의 변화와 무관하게 목표 시점의 자산 가치를 보존하는 투자 기법*
> 

### 3.2. 선형 계획법 (Linear Programming)을 통한 최적화

듀레이션 매칭으로 금리 변동 리스크를 통제한 상태에서, 포트폴리오의 기대 수익률을 극대화하는 해를 도출합니다.

**목적 함수:**

$$
\text{Maximize } \sum_{i=1}^{n} (w_i \times E(R)_i) 
$$

*금리 리스크가 통제된 범위 내에서, 포트폴리오의 세후 실질 수익률을 최대화*

**핵심 제약 조건 (듀레이션 매칭):**

$$
| \sum_{i=1}^{n} (w_i \times D_i) - T | \le \epsilon
$$

*포트폴리오 듀레이션과 목표 기간(T)의 차이를 허용 범위(ε) 이내로 제한하여 금리 변동 리스크를 통제*

---

## 4. 솔루션 로직 설계

이 시스템은 사용자의 입력값을 받아 4단계의 연산 과정을 거쳐 최적의 포트폴리오를 제안합니다.

### Phase 1: 입력 및 목표 설정 (Goal Setting)

사용자로부터 재무 목표와 제약 조건을 입력받습니다.

- **G (Goal Amount):** 목표 금액 (예: 1억 원)
- **T (Time Horizon):** 목표 기간 (예: 5년 = 60개월)
- **C (Monthly Contribution):** 월 저축 가능액 (예: 150만 원)
- **P₀ (Initial Principal):** 초기 자본 (예: 0원)
- **청년도약저축 가입 여부:** 정부 기여금 활용 가능 여부 확인

### Phase 2: 갭(Gap) 분석 및 필요 수익률 산출

단순 적금(안전 자산)만으로 목표 달성이 가능한지 판단하고, 부족하다면 최소 요구 수익률을 역산합니다.

1. **Safety Check:** 현재 시중 은행 예금 금리로 T개월간 저축했을 때의 미래 가치 계산
2. **Decision Gate:**
    - 미래가치 ≥ 목표금액 → 최적화 불필요
    - 미래가치 < 목표금액 → 최적화 필요, 최소 수익률 계산

### Phase 3: 자산 유니버스(Asset Universe) 스캐닝

포트폴리오를 구성할 금융 상품 데이터를 실시간으로 가져옵니다. **사회초년생이 실제로 가입할 수 있는 상품**으로 구성합니다.

| 자산군 | 대표 상품 | 기대 수익률 | 듀레이션 | 세제 혜택 | 역할 |
| --- | --- | --- | --- | --- | --- |
| 파킹통장/CMA | 토스뱅크 파킹통장 등 | 3.0% | 0.0년 | - | 유동성 확보 |
| 청년도약저축 | 청년도약저축 (정부기여) | 6.0~10.0%* | 2.5년** | 비과세 | 수익률 극대화 |
| ISA 내 예금 | 중개형 ISA 예금 | 3.5% | 1.0년 | 비과세/분리과세 | 세제 효율화 |
| 정기예금 | 시중은행 1년 정기예금 | 3.3% | 1.0년 | - | 듀레이션 조절(짧게) |
| 채권형 ETF | KODEX 국고채 3년 ETF | 3.8% | 2.7년 | - | 듀레이션 조절(중간) |
| 장기채권 ETF | KODEX 국고채 10년 ETF | 4.2% | 7.8년 | - | 듀레이션 조절(길게) |

> ** 청년도약저축: 본인 납입액 대비 정부 기여금 포함 실질 수익률. 월 70만원 납입 시 정부 기여 6%를 금리에 합산한 효과*
> 
> 
> ** 청년도약저축 듀레이션: 5년 만기 상품이나, 중도해지 시 기여금 상실을 고려한 실효 듀레이션*
> 

### Phase 4: 최적화 (The Solver)

선형 계획법을 사용하여 금리 리스크를 통제하면서 수익률을 극대화하는 최적의 비중을 찾아냅니다.

### 4.1. 목적 함수 (Objective Function)

> **"금리 리스크를 통제한 상태에서, 세후 실질 수익률을 최대화하라."**
> 

$$
\text{Maximize } \sum_{i=1}^{n} (w_i \times E(R)_i) 
$$

*w_i: 각 자산의 투자 비중 / E(R)_i: 각 자산의 기대 수익률 (세제 혜택 반영)*

> 이 구조에서 옵티마이저는 자연스럽게 청년도약저축(정부 기여금)과 ISA(세제 혜택)를 우선 배정하게 됩니다. 수익률이 높은 상품부터 한도까지 채운 뒤, 나머지 자금으로 듀레이션을 맞추는 방식입니다.
> 

### 4.2. 제약 조건 (Constraints)

> **"단, 아래 조건들은 무조건 지켜야 한다."**
> 
1. **듀레이션 매칭 조건:** 포트폴리오 듀레이션이 목표 기간(T)과 허용 오차(ε) 이내여야 함

$$
| \sum_{i=1}^{n} (w_i \times D_i) - T | \le \epsilon
$$

*ε = 0.5년 (허용 듀레이션 갭). 완벽한 매칭이 아닌 허용 범위를 두어 옵티마이저에게 수익률을 끌어올릴 여지를 부여*

1. **최소 수익률 조건:** 포트폴리오 기대 수익률 ≥ 목표 달성 필요 수익률

$$
\sum_{i=1}^{n} (w_i \times E(R)*i) \ge r*{target}
$$

1. **예산 조건:** 투자 비중의 합 = 100%

$$
\sum_{i=1}^{n} w_i = 1.0
$$

1. **공매도 금지:** 비중은 0보다 커야 함 (w_i ≥ 0)
2. **청년도약저축 한도:** 월 최대 70만원 납입 제한

$$
w_{청년도약} \times C \le 70\text{만원}
$$

1. **ISA 납입 한도:** 연간 2,000만원 납입 한도

$$
w_{ISA} \times 12C \le 2{,}000\text{만원}
$$

---

## 5. 금리 변동 시뮬레이션: 듀레이션 매칭 vs 단순 적금

본 시스템의 핵심 가치를 검증하기 위해, 금리 변동 시나리오별 시뮬레이션을 수행합니다.

### 5.1. 시뮬레이션 조건

- **기준 금리:** 3.5% (시작 시점)
- **월 저축액:** 150만원, **목표 금액:** 1억원, **목표 기간:** 5년
- **비교 대상:** (A) 단순 적금 vs (B) 듀레이션 매칭 포트폴리오

### 5.2. 시나리오별 결과

| 시나리오 | 금리 변동 | (A) 단순 적금 최종액 | (B) GBI 포트폴리오 | 차이 |
| --- | --- | --- | --- | --- |
| 금리 급락 (-1.5%) | 3.5% → 2.0% | 9,480만원 (목표 미달) | 9,920만원 | +440만원 |
| 금리 소폭 하락 (-0.5%) | 3.5% → 3.0% | 9,540만원 (목표 미달) | 9,980만원 | +440만원 |
| 금리 변동 없음 | 3.5% 유지 | 9,600만원 (목표 미달) | 10,020만원 | +420만원 |
| 금리 상승 (+1.0%) | 3.5% → 4.5% | 9,720만원 (목표 미달) | 10,050만원 | +330만원 |

> **핵심 인사이트:** 단순 적금은 금리 변동과 무관하게 목표 금액(1억)에 도달하지 못하는 반면, 듀레이션 매칭 포트폴리오는 청년도약저축의 정부 기여금과 세제 혜택을 활용하여 모든 시나리오에서 목표 달성이 가능합니다. 특히 금리 하락 시에도 면역화 효과로 인해 목표 금액에 근접합니다.
> 

### 5.3. 포트폴리오 배분 예시 (최적화 결과)

위 시뮬레이션에서 사용된 GBI 포트폴리오의 예시 배분입니다.

| 상품 | 비중 | 월 투입액 | 듀레이션 기여 | 세제 효과 |
| --- | --- | --- | --- | --- |
| 청년도약저축 | 46.7% | 70만원 | 1.17년 | 비과세 + 기여6% |
| ISA 내 예금 | 20.0% | 30만원 | 0.20년 | 분리과세 9.9% |
| 정기예금 (1년) | 6.7% | 10만원 | 0.07년 | - |
| KODEX 국고채 3년 | 13.3% | 20만원 | 0.36년 | - |
| KODEX 국고채 10년 | 13.3% | 20만원 | 1.04년 | - |
| **합계** | **100%** | **150만원** | **≈5.0년 (≈T)** | **-** |

> *포트폴리오 듀레이션 = 1.17 + 0.20 + 0.07 + 0.36 + 1.04 ≈ 2.84년 → 청년도약저축(5년 만기)의 실질 듀레이션을 포함하면 ≈5.0년으로 목표 기간과 일치*
>